<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WQM</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

</head>

<body>
    <button id="start-button">开始</button>
    <div id="chart-container"></div>


    <script>
        // 初始化图表
        const chartContainer = document.getElementById('chart-container');
        const chartData = [{
            x: [],
            y: [],
            mode: 'lines',
        }];
        const chartLayout = {
            title: '实时流量',
        };
        Plotly.newPlot(chartContainer, chartData, chartLayout);

        // 添加按钮点击事件监听器
        const startButton = document.getElementById('start-button');
        let timerId = null;
        startButton.addEventListener('click', () => {
            if (timerId === null) {
                timerId = setInterval(() => {
                    const time = new Date();
                    const flow = Math.random() * 100;
                    Plotly.extendTraces(chartContainer, { x: [[time]], y: [[flow]] }, [0]);
                }, 1000);
            }
        });


    </script>
</body>

</html>